<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live TV Pro</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: 'Segoe UI', sans-serif; color: white; }
        
        /* Notice Bar (Marquee) */
        #notice-bar {
            position: fixed; top: 0; left: 0; width: 100%; height: 35px;
            background: rgba(229, 9, 20, 0.6); color: white;
            z-index: 2000; overflow: hidden; line-height: 35px;
            font-size: 16px; font-weight: bold; pointer-events: none;
            border-bottom: 2px solid gold;
        }
        .marquee {
            display: inline-block; white-space: nowrap;
            padding-left: 100%; 
            animation: marquee 20s linear infinite; /* One spin is 20s */
        }
        @keyframes marquee {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }

        /* Video Background */
        #player-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        iframe { width: 100%; height: 100%; border: none; background: #000; }

        /* Loading Screen */
        #loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; display: none; flex-direction: column;
            justify-content: center; align-items: center; z-index: 3000;
        }
        #loading-img { width: 90px; height: 70px; object-fit: contain; margin-bottom: 20px; background: white; padding: 8px; border-radius: 12px; }
        #loading-msg { font-size: 20px; font-weight: bold; margin-bottom: 15px; text-align: center; }
        .spinner { width: 40px; height: 40px; border: 4px solid #333; border-top: 4px solid #ff0000; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Touch Overlay for Phone */
        #touch-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 5; background: transparent; }

        /* Splash Screen */
        #splash { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #111; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999; }
        .start-btn { padding: 20px 60px; background: #ff0000; color: white; font-size: 26px; font-weight: bold; border: 4px solid transparent; border-radius: 50px; cursor: pointer; outline: none; transition: 0.3s; }
        .start-btn:focus { border-color: white; box-shadow: 0 0 25px #ff0000; transform: scale(1.1); }

        /* Sidebar Overlay */
        #sidebar { 
            position: fixed; top: 0; left: 0; width: 15%; height: 100%; 
            background: rgba(0, 0, 0, 0.4); backdrop-filter: blur(15px); 
            z-index: 4000; transform: translateX(-100%); 
            transition: transform 0.3s ease-in-out; 
            display: flex; flex-direction: column; border-right: 1px solid #333; 
        }
        #sidebar.active { transform: translateX(0); }
        .sidebar-header { padding: 20px 20px 20px 20px; text-align: center; color: white; font-weight: bold; font-size: 16px; border-bottom: 1px solid #333; }
        #channel-list { flex: 1; overflow-y: auto; list-style: none; padding: 0 5px 15px 5px; margin: 0; }
        #channel-list::-webkit-scrollbar { width: 0px; }

        .category-title { padding: 18px 10px 5px 10px; color: #ff0000; font-size: 14px; font-weight: bold; text-transform: uppercase; border-bottom: 1px solid #222; margin-top: 10px; }
        .channel-item { display: flex; align-items: center; padding: 6px; margin-top: 5px; border-radius: 8px; background: rgba(255,255,255,0.03); border: 2px solid transparent; cursor: pointer; }
        .channel-item.selected { background: rgba(255, 0, 0, 0.3); border-color: #ff0000; }
        .channel-item img { width: 45px; height: 30px; object-fit: contain; margin-right: 12px; background: white; border-radius: 4px; padding: 1px; }
        .channel-name { font-size: 9px; font-weight: 500; }

        #osd { position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); padding: 12px 30px; border-radius: 50px; z-index: 50; display: none; border: 1px solid #ff0000; text-align: center;}
    </style>
</head>
<body>

    <div id="notice-bar">
        <div id="marquee-text" class="marquee">WELCOME TO LIVE TV! PLEASE ENSURE YOU ARE CONNECTED TO THE ISP NETWORK FOR BEST PERFORMANCE. ENJOY HIGH-QUALITY STREAMING OF YOUR FAVORITE CHANNELS.  •  WELCOME TO LIVE TV! • </div>
    </div>

    <div id="touch-overlay" onclick="toggleSidebar()"></div>

    <div id="loading-screen">
        <img id="loading-img" src="" alt="">
        <div id="loading-msg">Channel loading...</div>
        <div id="loading-spinner" class="spinner"></div>
    </div>

    <div id="splash">
        <h1 style="color:red; font-size: 50px; margin-bottom: 0;">MASTER LINK LIVE TV</h1>
        <p style="color: #666; margin-bottom: 30px;">Premium ISP Streaming</p>
        <button id="start-btn-id" class="start-btn" onclick="startApp()" autofocus tabindex="1">START WATCHING</button>
        <p style="margin-top:20px; color: #888;">Use TV remote Ok / Touch to start</p>
    </div>

    <div id="player-container">
        <iframe id="main-frame" src="" allow="autoplay; fullscreen" onload="hideLoading()"></iframe>
    </div>

    <div id="sidebar">
        <div class="sidebar-header">MASTER LINK TV</div>
        <ul id="channel-list"></ul>
    </div>

    <div id="osd"></div>

    <script>
        // FULL DATASET (Simplified for code length, includes all 90 IDs internally)
        const rawChannels = [
            { group: "Bangla", name: "ATN BANGLA", id: "80", logo: "ATN BANGLA1745044183.png" },
            { group: "Bangla", name: "ATN NEWS", id: "95", logo: "ATN NEWS1745045113.png" },
            { group: "Bangla", name: "CHANNEL 24", id: "82", logo: "CHANNEL 241745044263.png" },
            { group: "Bangla", name: "CHANNEL I", id: "81", logo: "CHANNEL I1745044237.png" },
            { group: "Bangla", name: "COLORS BANGLA CINEMA", id: "47", logo: "COLORS BANGLA CINEMA1745041486.png" },
            { group: "Bangla", name: "COLORS BANGLA HD", id: "12", logo: "COLORS BANGLA HD1745033576.png" },
            { group: "Bangla", name: "GTV", id: "56", logo: "GTV1745042853.png" },
            { group: "Bangla", name: "INDEPENDENT TV", id: "77", logo: "INDEPENDENT TV1745044077.png" },
            { group: "Bangla", name: "JAMUNA TV", id: "76", logo: "JAMUNA TV1745044052.png" },
            { group: "Bangla", name: "JALSHA MOVIES HD", id: "19", logo: "JALSHA MOVIES HD1745034005.png" },
            { group: "Bangla", name: "MAASRANGA HD", id: "78", logo: "MAASRANGA HD1745044117.png" },
            { group: "Bangla", name: "NAGORIK", id: "54", logo: "NAGORIK1745042776.png" },
            { group: "Bangla", name: "SOMOY TV", id: "79", logo: "SOMOY TV1745044149.png" },
            { group: "Bangla", name: "SONY AAT", id: "44", logo: "SONY AAT1745041124.png" },
            { group: "Bangla", name: "STAR JALSHA HD", id: "18", logo: "STAR JALSHA HD1745033819.png" },
            { group: "Bangla", name: "SUN BANGLA HD", id: "17", logo: "SUN BANGLA HD1745033791.png" },
            { group: "Bangla", name: "ZEE BANGLA CINEMA", id: "43", logo: "ZEE BANGLA CINEMA1745040996.png" },
            { group: "Bangla", name: "ZEE BANGLA HD", id: "14", logo: "ZEE BANGLA HD1745033633.png" },
			
            { group: "Sports", name: "A SPORTS HD", id: "88", logo: "A SPORTS HD1745044782.png" },
            { group: "Sports", name: "EUROSPORTS HD", id: "40", logo: "EUROSPORTS HD1745040406.png" },
            { group: "Sports", name: "FAST SPORTS HD", id: "87", logo: "FAST SPORTS HD1745044750.png" },
            { group: "Sports", name: "GOLF SPORTS", id: "66", logo: "GOLF SPORTS1745043338.png" },
            { group: "Sports", name: "PTV SPORTS HD", id: "92", logo: "PTV SPORTS HD1745044993.png" },
            { group: "Sports", name: "SONY SPORTS 1 HD", id: "74", logo: "sony sports 1 hd.png" },
            { group: "Sports", name: "SONY SPORTS 2 HD", id: "29", logo: "sony sports 2 hd.png" },
            { group: "Sports", name: "SONY SPORTS 3", id: "30", logo: "Sony sports 3.png" },
            { group: "Sports", name: "SONY SPORTS 4", id: "72", logo: "sony sports 4.png" },
            { group: "Sports", name: "SONY SPORTS 5 HD", id: "101", logo: "sony sports 5 hd.png" },
            { group: "Sports", name: "SSC SPORTS", id: "96", logo: "ssc 1 hd.png" },
            { group: "Sports", name: "SSC SPORTS 5 HD", id: "103", logo: "ssc 5 hd.png" },
            { group: "Sports", name: "STAR SELECT 1 HD", id: "28", logo: "STAR SELECT 1 HD1745038777.png" },
            { group: "Sports", name: "STAR SPORTS 1 HD", id: "2", logo: "STAR SPORTS 1 HD1744991778.png" },
            { group: "Sports", name: "STAR SPORTS 2 HD", id: "3", logo: "STAR SPORTS 2 HD1744991842.png" },
            { group: "Sports", name: "STAR SPORTS 3", id: "31", logo: "STAR SPORTS 31745039893.png" },
            { group: "Sports", name: "STAR SPORTS SELECT 2 HD", id: "16", logo: "STAR SPORTS SELECT 2 HD1745033722.png" },
            { group: "Sports", name: "T SPORTS", id: "1", logo: "T SPORTS1744972630.png" },
            
			{ group: "Kids", name: "BAL BHARAT", id: "50", logo: "BAL BHARAT1745041576.png" },
            { group: "Kids", name: "CARTOON NETWORK", id: "8", logo: "CARTOON NETWORK1745033414.png" },
            { group: "Kids", name: "DURANTA TV", id: "68", logo: "DURANTA TV1745043400.png" },
            { group: "Kids", name: "HUNGAMA", id: "49", logo: "HUNGAMA1745041551.png" },
            { group: "Kids", name: "NICK", id: "46", logo: "NICK1745041451.png" },
            { group: "Kids", name: "NICK JR", id: "51", logo: "NICK JR1745042397.png" },
            { group: "Kids", name: "POGO", id: "48", logo: "POGO1745041515.png" },
            { group: "Kids", name: "SONIC", id: "45", logo: "SONIC1745041154.png" },
            { group: "Kids", name: "SONY YAY", id: "93", logo: "SONY YAY1745045046.png" },
            { group: "Kids", name: "SUPER HUNGAMA", id: "75", logo: "SUPER HUNGAMA1745044022.png" },
            
			{ group: "Hindi", name: "AND PICTURS HD", id: "5", logo: "AND PICTURS HD1745031440.png" },
            { group: "Hindi", name: "COLORS CINEPLEX HD", id: "10", logo: "COLORS CINEPLEX HD1745033519.png" },
            { group: "Hindi", name: "COLORS HD", id: "4", logo: "COLORS HD1745031404.png" },
            { group: "Hindi", name: "GEO NEWS HD", id: "90", logo: "GEO NEWS HD1745044892.png" },
            { group: "Hindi", name: "HUM TV", id: "89", logo: "HUM TV1745044837.png" },
            { group: "Hindi", name: "SONY ENT HD", id: "11", logo: "SONY ENT HD1745033553.png" },
            { group: "Hindi", name: "SONY MAX HD", id: "21", logo: "SONY MAX HD1745034069.png" },
            { group: "Hindi", name: "STAR BHARAT HD", id: "100", logo: "STAR BHARAT HD1745045255.png" },
            { group: "Hindi", name: "STAR GOLD 2 HD", id: "69", logo: "STAR GOLD 2 HD1745043441.png" },
            { group: "Hindi", name: "STAR GOLD HD", id: "20", logo: "STAR GOLD HD1745034037.png" },
            { group: "Hindi", name: "STAR GOLD SELECT HD", id: "71", logo: "STAR GOLD SELECT HD1745043508.png" },
            { group: "Hindi", name: "STAR PLUS HD", id: "24", logo: "STAR PLUS HD1745038577.png" },
            { group: "Hindi", name: "ZEE CINEMA HD", id: "13", logo: "ZEE CINEMA HD1745033602.png" },
            { group: "Hindi", name: "ZEE TV HD", id: "7", logo: "ZEE TV HD1745033383.png" },
            { group: "Hindi", name: "ZING", id: "53", logo: "ZING1745042718.png" },
            { group: "Hindi", name: "ZOOM", id: "42", logo: "ZOOM1745040961.png" },
            
			{ group: "English", name: "ALJAZEETA HD", id: "85", logo: "ALJAZEETA HD1745044358.png" },
            { group: "English", name: "AND FLIX HD", id: "35", logo: "AND FLIX HD1745040018.png" },
            { group: "English", name: "AND PRIVE HD", id: "41", logo: "AND PRIVE HD1745040451.png" },
            { group: "English", name: "AND XPLORE", id: "61", logo: "AND XPLORE1745043080.png" },
            { group: "English", name: "ANIMAL PLANET HD", id: "26", logo: "ANIMAL PLANET HD1745038671.png" },
            { group: "English", name: "AXN HD", id: "97", logo: "AXN HD1745045171.png" },
            { group: "English", name: "BBC EARTH HD", id: "102", logo: "BBC EARTH HD1745150455.png" },
            { group: "English", name: "DISCOVERY HD", id: "22", logo: "discovery hd.png" },
            { group: "English", name: "HISTORY TV HD", id: "15", logo: "HISTORY TV HD1745033679.png" },
            { group: "English", name: "HITZ MUSIC", id: "70", logo: "HITZ MUSIC1745043478.png" },
            { group: "English", name: "LOTUS TV", id: "91", logo: "LOTUS TV1745044960.png" },
            { group: "English", name: "LOVE NATURE", id: "67", logo: "LOVE NATURE1745043370.png" },
            { group: "English", name: "MN PLUS", id: "36", logo: "MN PLUS1745040057.png" },
            { group: "English", name: "MNX HD", id: "33", logo: "MNX HD1745039955.png" },
            { group: "English", name: "MOVIES NOW HD", id: "39", logo: "MOVIES NOW HD1745040368.png" },
            { group: "English", name: "NATGEO HD", id: "25", logo: "NATGEO HD1745038634.png" },
            { group: "English", name: "NATGEO WILD HD", id: "23", logo: "NATGEO WILD HD1745038542.png" },
            { group: "English", name: "ROMEDY NOW", id: "34", logo: "ROMEDY NOW1745039988.png" },
            { group: "English", name: "SONY BBC EARTH HD", id: "6", logo: "SONY BBC EARTH HD1745031522.png" },
            { group: "English", name: "SONY PIX HD", id: "32", logo: "SONY PIX HD1745039925.png" },
            { group: "English", name: "STAR MOVIES HD", id: "38", logo: "STAR MOVIES HD1745040174.png" },
            { group: "English", name: "STAR MOVIES SELECT HD", id: "27", logo: "STAR MOVIES SELECT HD1745038723.png" },
            { group: "English", name: "TLC HD", id: "9", logo: "TLC HD1745033484.png" },
            { group: "English", name: "TRAVEL XP", id: "62", logo: "TRAVEL XP1745043118.png" },
            { group: "English", name: "ZEE CAFE HD", id: "37", logo: "ZEE CAFE HD1745040102.png" },
            
			{ group: "Islamic", name: "MADANI TV HD", id: "83", logo: "MADANI TV HD1745044303.png" },
            { group: "Islamic", name: "PEACE TV BANGLA", id: "86", logo: "PEACE TV BANGLA1745044480.png" }
        ];

        let currentIndex = 0;
        let sidebarTimer;
        let loadTimeout;
        let isStarted = false;
        let marqueeCycles = 0;
        
        const frame = document.getElementById('main-frame');
        const sidebar = document.getElementById('sidebar');
        const list = document.getElementById('channel-list');
        const loader = document.getElementById('loading-screen');
        const osd = document.getElementById('osd');
        const marqueeEl = document.getElementById('marquee-text');
        const noticeBar = document.getElementById('notice-bar');

        function init() {
            // Notice Bar cycle counter
            marqueeEl.addEventListener('animationiteration', () => {
                marqueeCycles++;
                if (marqueeCycles >= 3) {
                    noticeBar.style.display = 'none';
                }
            });

            let currentGroup = "";
            rawChannels.forEach((ch, i) => {
                if (ch.group !== currentGroup) {
                    currentGroup = ch.group;
                    const head = document.createElement('li');
                    head.className = 'category-title';
                    head.innerText = currentGroup;
                    list.appendChild(head);
                }
                const li = document.createElement('li');
                li.className = 'channel-item';
                li.id = "ch-" + i;
                li.innerHTML = `<img src="http://10.99.99.99/assets/images/${ch.logo}"> <span class="channel-name">${ch.name}</span>`;
                li.onclick = (e) => { e.stopPropagation(); playChannel(i); };
                list.appendChild(li);
            });
            document.getElementById('start-btn-id').focus();
        }

        function startApp() {
            isStarted = true;
            document.getElementById('splash').remove();
            
            // Resume history
            const lastChannel = localStorage.getItem('last_tv_channel');
            playChannel(lastChannel ? parseInt(lastChannel) : 0);
        }

        function playChannel(index) {
            if (!isStarted) return;
            currentIndex = index;
            const ch = rawChannels[currentIndex];

            // Save history
            localStorage.setItem('last_tv_channel', currentIndex);

            // Loader
            loader.style.display = 'flex';
            document.getElementById('loading-img').src = `http://10.99.99.99/assets/images/${ch.logo}`;
            document.getElementById('loading-msg').innerHTML = `${ch.name}<br><span style="color:#888; font-size:14px">Buffering Stream...</span>`;

            clearTimeout(loadTimeout);
            loadTimeout = setTimeout(() => { loader.style.display = 'none'; }, 10000);

            frame.src = `http://10.99.99.99/player.php?stream=${ch.id}&autoplay=1`;

            document.querySelectorAll('.channel-item').forEach(el => el.classList.remove('selected'));
            const active = document.getElementById("ch-" + index);
            if (active) {
                active.classList.add('selected');
                active.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            osd.innerHTML = `[${ch.group}] <b>${ch.name}</b>`;
            osd.style.display = 'block';
            setTimeout(() => { osd.style.display = 'none'; }, 8000);
            
            showSidebar();
        }

         // HIDE LOADING SCREEN 2 SECONDS AFTER STARTING
        function hideLoading() {
            setTimeout(() => {
                loader.style.display = 'none';
            }, 3000); // 2000ms = 2 Seconds
        }

        function toggleSidebar() {
            if (!isStarted) return;
            if (sidebar.classList.contains('active')) sidebar.classList.remove('active');
            else showSidebar();
        }

        function showSidebar() {
            sidebar.classList.add('active');
            clearTimeout(sidebarTimer);
            sidebarTimer = setTimeout(() => { sidebar.classList.remove('active'); }, 5000);
        }

        window.addEventListener('keydown', (e) => {
            if (!isStarted) {
                if (e.key === "Enter" || e.key === "Ok") startApp();
                return;
            }
            showSidebar();
            if (e.key === "ArrowUp" || e.key === "PageUp" || e.key === "ChannelUp") {
                e.preventDefault();
                currentIndex = (currentIndex > 0) ? currentIndex - 1 : rawChannels.length - 1;
                playChannel(currentIndex);
            } 
            else if (e.key === "ArrowDown" || e.key === "PageDown" || e.key === "ChannelDown") {
                e.preventDefault();
                currentIndex = (currentIndex < rawChannels.length - 1) ? currentIndex + 1 : 0;
                playChannel(currentIndex);
            }
        });

        init();
    </script>
</body>
</html>








