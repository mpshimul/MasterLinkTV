<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI2 WebViewer Test</title>
  <style>
    body { margin:0; font-family: system-ui, Arial; background:#111; color:#eee; }
    header { padding:14px 16px; background:#222; position:sticky; top:0; }
    button { padding:10px 14px; border:0; border-radius:10px; background:#ff2d2d; color:white; font-weight:700; }
    #log { padding:12px 16px; white-space:pre-wrap; font-family: ui-monospace, monospace; font-size:13px; color:#9f9; }
    ul { list-style:none; padding:0; margin:0; }
    li { padding:12px 16px; border-top:1px solid #333; }
  </style>
</head>
<body>
  <header>
    <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
      <div>
        <div style="font-weight:800;">WebViewer Test Page</div>
        <div style="opacity:.8;font-size:13px;">If you see this, WebViewString is working.</div>
      </div>
      <button id="btn">Tap me</button>
    </div>
  </header>

  <div id="log">Loadingâ€¦</div>

  <ul id="list"></ul>

  <script>
    // Show errors on-screen (very useful in WebViewer)
    const logEl = document.getElementById('log');
    function log(msg){ logEl.textContent += "\n" + msg; }

    window.addEventListener('error', (e) => {
      log("JS ERROR: " + e.message);
      log("at: " + (e.filename||"?") + ":" + (e.lineno||"?"));
    });

    logEl.textContent = "readyState=" + document.readyState;
    log("userAgent=" + navigator.userAgent);

    // Simple data + render
    const channels = [
      { name: "Channel One", id: "1" },
      { name: "Channel Two", id: "2" },
      { name: "Channel Three", id: "3" }
    ];

    function render(){
      const ul = document.getElementById('list');
      ul.innerHTML = "";
      channels.forEach(c => {
        const li = document.createElement('li');
        li.textContent = c.name + " (id=" + c.id + ")";
        li.addEventListener('click', () => {
          log("Clicked: " + c.name);
        });
        ul.appendChild(li);
      });
      log("Rendered " + channels.length + " items.");
    }

    document.getElementById('btn').addEventListener('click', () => {
      log("Button tapped!");
    });

    document.addEventListener('DOMContentLoaded', () => {
      log("DOMContentLoaded fired");
      render();
    });
  </script>
</body>
</html>
